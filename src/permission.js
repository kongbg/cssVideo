import router from './router'
import { ElMessage } from 'element-plus'
import NProgress from 'nprogress'
import 'nprogress/nprogress.css'
import { getToken } from '@/utils/auth'
import { isHttp } from '@/utils/validate'
import { isRelogin } from '@/utils/request'
import useUserStore from '@/store/modules/user'
import useSettingsStore from '@/store/modules/settings'
import usePermissionStore from '@/store/modules/permission'

NProgress.configure({ showSpinner: false });
// let dataStr = JSON.stringify({"drawConf":{},"currentConfIndex":0,"currentConfInfo":{"id":"lpog3azz","content":[{"id":"8rel5j2b","speak":"背景","content":"叶凡本是21世纪的一名普普通通的外卖员，一天在送外卖的路上被一道闪电击中，醒来就出现在天玄大陆。\r"},{"id":"duint8vi","speak":"叶凡","content":"这是哪里？我穿越了吗？系统，有系统吗？快出来。\r"},{"id":"k34upsbl","speak":"系统","content":"宿主绑定成功，恭喜宿主激活无敌系统。\r"},{"id":"agykqrzo","speak":"叶凡","content":"以后就叫你统子吧，你有什么功能呢？\r"},{"id":"a0i9viqh","speak":"系统","content":"我功能多了去了，一句话，我无敌，你随意。\r"}],"comps":[{"type":"background","speak":"背景","id":"83w3x4o1","compId":"ccqdfh5d","compName":"background","comp":{"__name":"index","props":{"compData":{},"width":{"default":0},"height":{"default":0}},"__hmrId":"cfddb5a7","__scopeId":"data-v-cfddb5a7","__file":"F:/work/cssVideo/src/views/government/components/common/background/index.vue"},"schema":{"type":"background","name":"背景","property":{"background":{"show":false,"name":"背景","type":"background","value":{"image":{"label":"图片","checked":true,"url":"assets/images/background/1_1.jpg"}}}},"actions":[{"type":["speak"],"content":{"id":"8rel5j2b","speak":"背景","content":"叶凡本是21世纪的一名普普通通的外卖员，一天在送外卖的路上被一道闪电击中，醒来就出现在天玄大陆。\r"},"duration":0,"easing":"linear","delay":0,"iterations":1,"shakeHead":false,"scaleHead":false,"scaleBody":false,"randomFace":false,"fill":"forwards"}],"styles":{},"actionTypes":[{"value":"speak","label":"读"}]}},{"type":"person","id":"ftczfxp4","compId":"5nvl0j8s","compName":"person","comp":{"__name":"index","props":{"compData":{}},"__hmrId":"61fd5685","__scopeId":"data-v-61fd5685","__file":"F:/work/cssVideo/src/views/government/components/common/person/index.vue"},"schema":{"type":"background","name":"叶凡","property":{"position":{"show":true,"name":"位置","type":"position","value":{"unit":{"label":"单位","value":"px","option":[{"label":"px","value":"px"}]},"x":{"label":"x","value":416},"y":{"label":"y","value":179},"zIndex":{"label":"层级","value":0}}},"size":{"show":true,"name":"尺寸","type":"size","value":{"unit":{"label":"单位","value":"px","option":[{"label":"px","value":"px"}]},"width":{"label":"宽度","value":93},"height":{"label":"高度","value":192}}},"background":{"show":false,"name":"背景","type":"background","value":{"image":{"checked":true,"url":"assets/images/person/1/1.png"}}},"head":{"show":true,"inited":true,"name":"头","type":"head","value":{"image":{"label":"头","value":"assets/images/person/1/1_head_93x80x42x42x15x28x0x7.png"},"width":{"label":"宽度","value":93},"height":{"label":"高度","value":80},"x":{"label":"x","value":0},"y":{"label":"y","value":7}}},"body":{"show":true,"inited":true,"name":"身体","type":"body","value":{"image":{"label":"身体","value":"assets/images/person/1/1_body_93x112.png"},"width":{"label":"宽度","value":93},"height":{"label":"高度","value":112},"x":{"label":"x","value":0},"y":{"label":"y","value":0}}},"face":{"show":true,"inited":true,"name":"表情","type":"face","value":{"image":{"label":"表情","value":"assets/images/face/1.png"},"width":{"label":"宽度","value":42},"height":{"label":"高度","value":42},"x":{"label":"x","value":15},"y":{"label":"y","value":28}}}},"actions":[{"type":["speak"],"content":{"id":"duint8vi","speak":"叶凡","content":"这是哪里？我穿越了吗？系统，有系统吗？快出来。\r"},"duration":0,"easing":"linear","delay":0,"iterations":1,"shakeHead":false,"scaleHead":false,"scaleBody":false,"randomFace":false,"fill":"forwards"},{"type":["speak"],"content":{"id":"agykqrzo","speak":"叶凡","content":"以后就叫你统子吧，你有什么功能呢？\r"},"duration":0,"easing":"linear","delay":10,"iterations":1,"shakeHead":false,"scaleHead":false,"scaleBody":false,"randomFace":false,"fill":"forwards"}],"styles":{},"actionTypes":[{"value":"speak","label":"读"},{"value":"move","label":"移动","children":[{"value":"translate","label":"平移"},{"value":"walk","label":"走"},{"value":"run","label":"跑"},{"value":"jump","label":"跳"}]}]}},{"type":"person","id":"291ohp05","compId":"eakpo43x","compName":"person","comp":{"__name":"index","props":{"compData":{}},"__hmrId":"61fd5685","__scopeId":"data-v-61fd5685","__file":"F:/work/cssVideo/src/views/government/components/common/person/index.vue"},"schema":{"type":"background","name":"系统","property":{"position":{"show":true,"name":"位置","type":"position","value":{"unit":{"label":"单位","value":"px","option":[{"label":"px","value":"px"}]},"x":{"label":"x","value":93},"y":{"label":"y","value":199},"zIndex":{"label":"层级","value":0}}},"size":{"show":true,"name":"尺寸","type":"size","value":{"unit":{"label":"单位","value":"px","option":[{"label":"px","value":"px"}]},"width":{"label":"宽度","value":54},"height":{"label":"高度","value":133}}},"background":{"show":false,"name":"背景","type":"background","value":{"image":{"checked":true,"url":"assets/images/person/2/2.png"}}},"head":{"show":true,"inited":true,"name":"头","type":"head","value":{"image":{"label":"头","value":"assets/images/person/2/2_head_54x65x25x25x18x32x0x10.png"},"width":{"label":"宽度","value":54},"height":{"label":"高度","value":65},"x":{"label":"x","value":0},"y":{"label":"y","value":10}}},"body":{"show":true,"inited":true,"name":"身体","type":"body","value":{"image":{"label":"身体","value":"assets/images/person/2/2_body_54x68.png"},"width":{"label":"宽度","value":54},"height":{"label":"高度","value":68},"x":{"label":"x","value":0},"y":{"label":"y","value":0}}},"face":{"show":true,"inited":true,"name":"表情","type":"face","value":{"image":{"label":"表情","value":"assets/images/face/1.png"},"width":{"label":"宽度","value":25},"height":{"label":"高度","value":25},"x":{"label":"x","value":18},"y":{"label":"y","value":32}}}},"actions":[{"type":["speak"],"content":{"id":"k34upsbl","speak":"系统","content":"宿主绑定成功，恭喜宿主激活无敌系统。\r"},"duration":0,"easing":"linear","delay":0,"iterations":1,"shakeHead":false,"scaleHead":false,"scaleBody":false,"randomFace":false,"fill":"forwards"},{"type":["speak"],"content":{"id":"a0i9viqh","speak":"系统","content":"我功能多了去了，一句话，我无敌，你随意。\r"},"duration":0,"easing":"linear","delay":10,"iterations":1,"shakeHead":false,"scaleHead":false,"scaleBody":false,"randomFace":false,"fill":"forwards"}],"styles":{},"actionTypes":[{"value":"speak","label":"读"},{"value":"move","label":"移动","children":[{"value":"translate","label":"平移"},{"value":"walk","label":"走"},{"value":"run","label":"跑"},{"value":"jump","label":"跳"}]}]}}],"imageUrl":"assets/images/background/1_1.jpg"},"currentCompIndex":0,"currentCompInfo":{"type":"background","speak":"背景","id":"83w3x4o1","compId":"ccqdfh5d","compName":"background","comp":{"__name":"index","props":{"compData":{},"width":{"default":0},"height":{"default":0}},"__hmrId":"cfddb5a7","__scopeId":"data-v-cfddb5a7","__file":"F:/work/cssVideo/src/views/government/components/common/background/index.vue"},"schema":{"type":"background","name":"背景","property":{"background":{"show":false,"name":"背景","type":"background","value":{"image":{"label":"图片","checked":true,"url":"assets/images/background/1_1.jpg"}}}},"actions":[{"type":["speak"],"content":{"id":"8rel5j2b","speak":"背景","content":"叶凡本是21世纪的一名普普通通的外卖员，一天在送外卖的路上被一道闪电击中，醒来就出现在天玄大陆。\r"},"duration":0,"easing":"linear","delay":0,"iterations":1,"shakeHead":false,"scaleHead":false,"scaleBody":false,"randomFace":false,"fill":"forwards"}],"styles":{},"actionTypes":[{"value":"speak","label":"读"}]}},"textData":{},"drawConfigs":{"id":"allkno4h","name":"超级无敌系统第一集","confs":[{"id":"lpog3azz","content":[{"id":"8rel5j2b","speak":"背景","content":"叶凡本是21世纪的一名普普通通的外卖员，一天在送外卖的路上被一道闪电击中，醒来就出现在天玄大陆。\r"},{"id":"duint8vi","speak":"叶凡","content":"这是哪里？我穿越了吗？系统，有系统吗？快出来。\r"},{"id":"k34upsbl","speak":"系统","content":"宿主绑定成功，恭喜宿主激活无敌系统。\r"},{"id":"agykqrzo","speak":"叶凡","content":"以后就叫你统子吧，你有什么功能呢？\r"},{"id":"a0i9viqh","speak":"系统","content":"我功能多了去了，一句话，我无敌，你随意。\r"}],"comps":[{"type":"background","speak":"背景","id":"83w3x4o1","compId":"ccqdfh5d","compName":"background","comp":{"__name":"index","props":{"compData":{},"width":{"default":0},"height":{"default":0}},"__hmrId":"cfddb5a7","__scopeId":"data-v-cfddb5a7","__file":"F:/work/cssVideo/src/views/government/components/common/background/index.vue"},"schema":{"type":"background","name":"背景","property":{"background":{"show":false,"name":"背景","type":"background","value":{"image":{"label":"图片","checked":true,"url":"assets/images/background/1_1.jpg"}}}},"actions":[{"type":["speak"],"content":{"id":"8rel5j2b","speak":"背景","content":"叶凡本是21世纪的一名普普通通的外卖员，一天在送外卖的路上被一道闪电击中，醒来就出现在天玄大陆。\r"},"duration":0,"easing":"linear","delay":0,"iterations":1,"shakeHead":false,"scaleHead":false,"scaleBody":false,"randomFace":false,"fill":"forwards"}],"styles":{},"actionTypes":[{"value":"speak","label":"读"}]}},{"type":"person","id":"ftczfxp4","compId":"5nvl0j8s","compName":"person","comp":{"__name":"index","props":{"compData":{}},"__hmrId":"61fd5685","__scopeId":"data-v-61fd5685","__file":"F:/work/cssVideo/src/views/government/components/common/person/index.vue"},"schema":{"type":"background","name":"叶凡","property":{"position":{"show":true,"name":"位置","type":"position","value":{"unit":{"label":"单位","value":"px","option":[{"label":"px","value":"px"}]},"x":{"label":"x","value":416},"y":{"label":"y","value":179},"zIndex":{"label":"层级","value":0}}},"size":{"show":true,"name":"尺寸","type":"size","value":{"unit":{"label":"单位","value":"px","option":[{"label":"px","value":"px"}]},"width":{"label":"宽度","value":93},"height":{"label":"高度","value":192}}},"background":{"show":false,"name":"背景","type":"background","value":{"image":{"checked":true,"url":"assets/images/person/1/1.png"}}},"head":{"show":true,"inited":true,"name":"头","type":"head","value":{"image":{"label":"头","value":"assets/images/person/1/1_head_93x80x42x42x15x28x0x7.png"},"width":{"label":"宽度","value":93},"height":{"label":"高度","value":80},"x":{"label":"x","value":0},"y":{"label":"y","value":7}}},"body":{"show":true,"inited":true,"name":"身体","type":"body","value":{"image":{"label":"身体","value":"assets/images/person/1/1_body_93x112.png"},"width":{"label":"宽度","value":93},"height":{"label":"高度","value":112},"x":{"label":"x","value":0},"y":{"label":"y","value":0}}},"face":{"show":true,"inited":true,"name":"表情","type":"face","value":{"image":{"label":"表情","value":"assets/images/face/1.png"},"width":{"label":"宽度","value":42},"height":{"label":"高度","value":42},"x":{"label":"x","value":15},"y":{"label":"y","value":28}}}},"actions":[{"type":["speak"],"content":{"id":"duint8vi","speak":"叶凡","content":"这是哪里？我穿越了吗？系统，有系统吗？快出来。\r"},"duration":0,"easing":"linear","delay":0,"iterations":1,"shakeHead":false,"scaleHead":false,"scaleBody":false,"randomFace":false,"fill":"forwards"},{"type":["speak"],"content":{"id":"agykqrzo","speak":"叶凡","content":"以后就叫你统子吧，你有什么功能呢？\r"},"duration":0,"easing":"linear","delay":10,"iterations":1,"shakeHead":false,"scaleHead":false,"scaleBody":false,"randomFace":false,"fill":"forwards"}],"styles":{},"actionTypes":[{"value":"speak","label":"读"},{"value":"move","label":"移动","children":[{"value":"translate","label":"平移"},{"value":"walk","label":"走"},{"value":"run","label":"跑"},{"value":"jump","label":"跳"}]}]}},{"type":"person","id":"291ohp05","compId":"eakpo43x","compName":"person","comp":{"__name":"index","props":{"compData":{}},"__hmrId":"61fd5685","__scopeId":"data-v-61fd5685","__file":"F:/work/cssVideo/src/views/government/components/common/person/index.vue"},"schema":{"type":"background","name":"系统","property":{"position":{"show":true,"name":"位置","type":"position","value":{"unit":{"label":"单位","value":"px","option":[{"label":"px","value":"px"}]},"x":{"label":"x","value":93},"y":{"label":"y","value":199},"zIndex":{"label":"层级","value":0}}},"size":{"show":true,"name":"尺寸","type":"size","value":{"unit":{"label":"单位","value":"px","option":[{"label":"px","value":"px"}]},"width":{"label":"宽度","value":54},"height":{"label":"高度","value":133}}},"background":{"show":false,"name":"背景","type":"background","value":{"image":{"checked":true,"url":"assets/images/person/2/2.png"}}},"head":{"show":true,"inited":true,"name":"头","type":"head","value":{"image":{"label":"头","value":"assets/images/person/2/2_head_54x65x25x25x18x32x0x10.png"},"width":{"label":"宽度","value":54},"height":{"label":"高度","value":65},"x":{"label":"x","value":0},"y":{"label":"y","value":10}}},"body":{"show":true,"inited":true,"name":"身体","type":"body","value":{"image":{"label":"身体","value":"assets/images/person/2/2_body_54x68.png"},"width":{"label":"宽度","value":54},"height":{"label":"高度","value":68},"x":{"label":"x","value":0},"y":{"label":"y","value":0}}},"face":{"show":true,"inited":true,"name":"表情","type":"face","value":{"image":{"label":"表情","value":"assets/images/face/1.png"},"width":{"label":"宽度","value":25},"height":{"label":"高度","value":25},"x":{"label":"x","value":18},"y":{"label":"y","value":32}}}},"actions":[{"type":["speak"],"content":{"id":"k34upsbl","speak":"系统","content":"宿主绑定成功，恭喜宿主激活无敌系统。\r"},"duration":0,"easing":"linear","delay":0,"iterations":1,"shakeHead":false,"scaleHead":false,"scaleBody":false,"randomFace":false,"fill":"forwards"},{"type":["speak"],"content":{"id":"a0i9viqh","speak":"系统","content":"我功能多了去了，一句话，我无敌，你随意。\r"},"duration":0,"easing":"linear","delay":10,"iterations":1,"shakeHead":false,"scaleHead":false,"scaleBody":false,"randomFace":false,"fill":"forwards"}],"styles":{},"actionTypes":[{"value":"speak","label":"读"},{"value":"move","label":"移动","children":[{"value":"translate","label":"平移"},{"value":"walk","label":"走"},{"value":"run","label":"跑"},{"value":"jump","label":"跳"}]}]}}],"imageUrl":"assets/images/background/1_1.jpg"},{"id":"1g1smdzn","content":[{"id":"jqb908b9","speak":"背景","content":"叶凡在无敌系统后。简直是强到离谱。\r"},{"id":"58rijc6","speak":"叶凡","content":"哈哈哈\r"},{"id":"f5uecsvp","speak":"系统","content":"系统监测到附近有气运之子，是否前往查看？\r"},{"id":"gg2w15hj","speak":"叶凡","content":"前往！"}],"comps":[{"type":"background","speak":"背景","id":"15kxuarh","compId":"cka19bcv","compName":"background","comp":{"__name":"index","props":{"compData":{},"width":{"default":0},"height":{"default":0}},"__hmrId":"cfddb5a7","__scopeId":"data-v-cfddb5a7","__file":"F:/work/cssVideo/src/views/government/components/common/background/index.vue"},"schema":{"type":"background","name":"背景","property":{"background":{"show":false,"name":"背景","type":"background","value":{"image":{"label":"图片","checked":true,"url":"assets/images/background/1_1.jpg"}}}},"actions":[{"type":["speak"],"content":{"id":"jqb908b9","speak":"背景","content":"叶凡在无敌系统后。简直是强到离谱。\r"},"duration":0,"easing":"linear","delay":0,"iterations":1,"shakeHead":false,"scaleHead":false,"scaleBody":false,"randomFace":false,"fill":"forwards"}],"styles":{},"actionTypes":[{"value":"speak","label":"读"}]}},{"type":"person","id":"g564qt19","compId":"a59lgq6d","compName":"person","comp":{"__name":"index","props":{"compData":{}},"__hmrId":"61fd5685","__scopeId":"data-v-61fd5685","__file":"F:/work/cssVideo/src/views/government/components/common/person/index.vue"},"schema":{"type":"background","name":"叶凡","property":{"position":{"show":true,"name":"位置","type":"position","value":{"unit":{"label":"单位","value":"px","option":[{"label":"px","value":"px"}]},"x":{"label":"x","value":328},"y":{"label":"y","value":216},"zIndex":{"label":"层级","value":0}}},"size":{"show":true,"name":"尺寸","type":"size","value":{"unit":{"label":"单位","value":"px","option":[{"label":"px","value":"px"}]},"width":{"label":"宽度","value":93},"height":{"label":"高度","value":192}}},"background":{"show":false,"name":"背景","type":"background","value":{"image":{"checked":true,"url":"assets/images/person/1/1.png"}}},"head":{"show":true,"inited":true,"name":"头","type":"head","value":{"image":{"label":"头","value":"assets/images/person/1/1_head_93x80x42x42x15x28x0x7.png"},"width":{"label":"宽度","value":93},"height":{"label":"高度","value":80},"x":{"label":"x","value":0},"y":{"label":"y","value":7}}},"body":{"show":true,"inited":true,"name":"身体","type":"body","value":{"image":{"label":"身体","value":"assets/images/person/1/1_body_93x112.png"},"width":{"label":"宽度","value":93},"height":{"label":"高度","value":112},"x":{"label":"x","value":0},"y":{"label":"y","value":0}}},"face":{"show":true,"inited":true,"name":"表情","type":"face","value":{"image":{"label":"表情","value":"assets/images/face/1.png"},"width":{"label":"宽度","value":42},"height":{"label":"高度","value":42},"x":{"label":"x","value":15},"y":{"label":"y","value":28}}}},"actions":[{"type":["speak"],"content":{"id":"58rijc6","speak":"叶凡","content":"哈哈哈\r"},"duration":0,"easing":"linear","delay":0,"iterations":1,"shakeHead":false,"scaleHead":false,"scaleBody":false,"randomFace":false,"fill":"forwards"},{"type":["speak"],"content":{"id":"gg2w15hj","speak":"叶凡","content":"前往！"},"duration":0,"easing":"linear","delay":10,"iterations":1,"shakeHead":false,"scaleHead":false,"scaleBody":false,"randomFace":false,"fill":"forwards"}],"styles":{},"actionTypes":[{"value":"speak","label":"读"},{"value":"move","label":"移动","children":[{"value":"translate","label":"平移"},{"value":"walk","label":"走"},{"value":"run","label":"跑"},{"value":"jump","label":"跳"}]}]}},{"type":"person","id":"am9tt7gq","compId":"e7lnx86l","compName":"person","comp":{"__name":"index","props":{"compData":{}},"__hmrId":"61fd5685","__scopeId":"data-v-61fd5685","__file":"F:/work/cssVideo/src/views/government/components/common/person/index.vue"},"schema":{"type":"background","name":"系统","property":{"position":{"show":true,"name":"位置","type":"position","value":{"unit":{"label":"单位","value":"px","option":[{"label":"px","value":"px"}]},"x":{"label":"x","value":64},"y":{"label":"y","value":242},"zIndex":{"label":"层级","value":0}}},"size":{"show":true,"name":"尺寸","type":"size","value":{"unit":{"label":"单位","value":"px","option":[{"label":"px","value":"px"}]},"width":{"label":"宽度","value":54},"height":{"label":"高度","value":133}}},"background":{"show":false,"name":"背景","type":"background","value":{"image":{"checked":true,"url":"assets/images/person/2/2.png"}}},"head":{"show":true,"inited":true,"name":"头","type":"head","value":{"image":{"label":"头","value":"assets/images/person/2/2_head_54x65x25x25x18x32x0x10.png"},"width":{"label":"宽度","value":54},"height":{"label":"高度","value":65},"x":{"label":"x","value":0},"y":{"label":"y","value":10}}},"body":{"show":true,"inited":true,"name":"身体","type":"body","value":{"image":{"label":"身体","value":"assets/images/person/2/2_body_54x68.png"},"width":{"label":"宽度","value":54},"height":{"label":"高度","value":68},"x":{"label":"x","value":0},"y":{"label":"y","value":0}}},"face":{"show":true,"inited":true,"name":"表情","type":"face","value":{"image":{"label":"表情","value":"assets/images/face/1.png"},"width":{"label":"宽度","value":25},"height":{"label":"高度","value":25},"x":{"label":"x","value":18},"y":{"label":"y","value":32}}}},"actions":[{"type":["speak"],"content":{"id":"f5uecsvp","speak":"系统","content":"系统监测到附近有气运之子，是否前往查看？\r"},"duration":0,"easing":"linear","delay":0,"iterations":1,"shakeHead":false,"scaleHead":false,"scaleBody":false,"randomFace":false,"fill":"forwards"}],"styles":{},"actionTypes":[{"value":"speak","label":"读"},{"value":"move","label":"移动","children":[{"value":"translate","label":"平移"},{"value":"walk","label":"走"},{"value":"run","label":"跑"},{"value":"jump","label":"跳"}]}]}}],"imageUrl":"assets/images/background/1_1.jpg"}]},"textList":[],"mode":"desgin","dragElType":"person","videoTypes":[{"id":"12t3da0b","name":"1","list":[{"id":"allkno4h","name":"超级无敌系统第一集","content":"###part\r\n背景：叶凡本是21世纪的一名普普通通的外卖员，一天在送外卖的路上被一道闪电击中，醒来就出现在天玄大陆。\r\n叶凡：这是哪里？我穿越了吗？系统，有系统吗？快出来。\r\n系统：宿主绑定成功，恭喜宿主激活无敌系统。\r\n叶凡：以后就叫你统子吧，你有什么功能呢？\r\n系统：我功能多了去了，一句话，我无敌，你随意。\r\n###part\r\n背景：叶凡在无敌系统后。简直是强到离谱。\r\n叶凡：哈哈哈\r\n系统：系统监测到附近有气运之子，是否前往查看？\r\n叶凡：前往！","confs":[{"id":"lpog3azz","content":[{"id":"8rel5j2b","speak":"背景","content":"叶凡本是21世纪的一名普普通通的外卖员，一天在送外卖的路上被一道闪电击中，醒来就出现在天玄大陆。\r"},{"id":"duint8vi","speak":"叶凡","content":"这是哪里？我穿越了吗？系统，有系统吗？快出来。\r"},{"id":"k34upsbl","speak":"系统","content":"宿主绑定成功，恭喜宿主激活无敌系统。\r"},{"id":"agykqrzo","speak":"叶凡","content":"以后就叫你统子吧，你有什么功能呢？\r"},{"id":"a0i9viqh","speak":"系统","content":"我功能多了去了，一句话，我无敌，你随意。\r"}],"comps":[{"type":"background","speak":"背景","id":"83w3x4o1","compId":"ccqdfh5d","compName":"background","comp":{"__name":"index","props":{"compData":{},"width":{"default":0},"height":{"default":0}},"__hmrId":"cfddb5a7","__scopeId":"data-v-cfddb5a7","__file":"F:/work/cssVideo/src/views/government/components/common/background/index.vue"},"schema":{"type":"background","name":"背景","property":{"background":{"show":false,"name":"背景","type":"background","value":{"image":{"label":"图片","checked":true,"url":"assets/images/background/1_1.jpg"}}}},"actions":[{"type":["speak"],"content":{"id":"8rel5j2b","speak":"背景","content":"叶凡本是21世纪的一名普普通通的外卖员，一天在送外卖的路上被一道闪电击中，醒来就出现在天玄大陆。\r"},"duration":0,"easing":"linear","delay":0,"iterations":1,"shakeHead":false,"scaleHead":false,"scaleBody":false,"randomFace":false,"fill":"forwards"}],"styles":{},"actionTypes":[{"value":"speak","label":"读"}]}},{"type":"person","id":"ftczfxp4","compId":"5nvl0j8s","compName":"person","comp":{"__name":"index","props":{"compData":{}},"__hmrId":"61fd5685","__scopeId":"data-v-61fd5685","__file":"F:/work/cssVideo/src/views/government/components/common/person/index.vue"},"schema":{"type":"background","name":"叶凡","property":{"position":{"show":true,"name":"位置","type":"position","value":{"unit":{"label":"单位","value":"px","option":[{"label":"px","value":"px"}]},"x":{"label":"x","value":416},"y":{"label":"y","value":179},"zIndex":{"label":"层级","value":0}}},"size":{"show":true,"name":"尺寸","type":"size","value":{"unit":{"label":"单位","value":"px","option":[{"label":"px","value":"px"}]},"width":{"label":"宽度","value":93},"height":{"label":"高度","value":192}}},"background":{"show":false,"name":"背景","type":"background","value":{"image":{"checked":true,"url":"assets/images/person/1/1.png"}}},"head":{"show":true,"inited":true,"name":"头","type":"head","value":{"image":{"label":"头","value":"assets/images/person/1/1_head_93x80x42x42x15x28x0x7.png"},"width":{"label":"宽度","value":93},"height":{"label":"高度","value":80},"x":{"label":"x","value":0},"y":{"label":"y","value":7}}},"body":{"show":true,"inited":true,"name":"身体","type":"body","value":{"image":{"label":"身体","value":"assets/images/person/1/1_body_93x112.png"},"width":{"label":"宽度","value":93},"height":{"label":"高度","value":112},"x":{"label":"x","value":0},"y":{"label":"y","value":0}}},"face":{"show":true,"inited":true,"name":"表情","type":"face","value":{"image":{"label":"表情","value":"assets/images/face/1.png"},"width":{"label":"宽度","value":42},"height":{"label":"高度","value":42},"x":{"label":"x","value":15},"y":{"label":"y","value":28}}}},"actions":[{"type":["speak"],"content":{"id":"duint8vi","speak":"叶凡","content":"这是哪里？我穿越了吗？系统，有系统吗？快出来。\r"},"duration":0,"easing":"linear","delay":0,"iterations":1,"shakeHead":false,"scaleHead":false,"scaleBody":false,"randomFace":false,"fill":"forwards"},{"type":["speak"],"content":{"id":"agykqrzo","speak":"叶凡","content":"以后就叫你统子吧，你有什么功能呢？\r"},"duration":0,"easing":"linear","delay":10,"iterations":1,"shakeHead":false,"scaleHead":false,"scaleBody":false,"randomFace":false,"fill":"forwards"}],"styles":{},"actionTypes":[{"value":"speak","label":"读"},{"value":"move","label":"移动","children":[{"value":"translate","label":"平移"},{"value":"walk","label":"走"},{"value":"run","label":"跑"},{"value":"jump","label":"跳"}]}]}},{"type":"person","id":"291ohp05","compId":"eakpo43x","compName":"person","comp":{"__name":"index","props":{"compData":{}},"__hmrId":"61fd5685","__scopeId":"data-v-61fd5685","__file":"F:/work/cssVideo/src/views/government/components/common/person/index.vue"},"schema":{"type":"background","name":"系统","property":{"position":{"show":true,"name":"位置","type":"position","value":{"unit":{"label":"单位","value":"px","option":[{"label":"px","value":"px"}]},"x":{"label":"x","value":93},"y":{"label":"y","value":199},"zIndex":{"label":"层级","value":0}}},"size":{"show":true,"name":"尺寸","type":"size","value":{"unit":{"label":"单位","value":"px","option":[{"label":"px","value":"px"}]},"width":{"label":"宽度","value":54},"height":{"label":"高度","value":133}}},"background":{"show":false,"name":"背景","type":"background","value":{"image":{"checked":true,"url":"assets/images/person/2/2.png"}}},"head":{"show":true,"inited":true,"name":"头","type":"head","value":{"image":{"label":"头","value":"assets/images/person/2/2_head_54x65x25x25x18x32x0x10.png"},"width":{"label":"宽度","value":54},"height":{"label":"高度","value":65},"x":{"label":"x","value":0},"y":{"label":"y","value":10}}},"body":{"show":true,"inited":true,"name":"身体","type":"body","value":{"image":{"label":"身体","value":"assets/images/person/2/2_body_54x68.png"},"width":{"label":"宽度","value":54},"height":{"label":"高度","value":68},"x":{"label":"x","value":0},"y":{"label":"y","value":0}}},"face":{"show":true,"inited":true,"name":"表情","type":"face","value":{"image":{"label":"表情","value":"assets/images/face/1.png"},"width":{"label":"宽度","value":25},"height":{"label":"高度","value":25},"x":{"label":"x","value":18},"y":{"label":"y","value":32}}}},"actions":[{"type":["speak"],"content":{"id":"k34upsbl","speak":"系统","content":"宿主绑定成功，恭喜宿主激活无敌系统。\r"},"duration":0,"easing":"linear","delay":0,"iterations":1,"shakeHead":false,"scaleHead":false,"scaleBody":false,"randomFace":false,"fill":"forwards"},{"type":["speak"],"content":{"id":"a0i9viqh","speak":"系统","content":"我功能多了去了，一句话，我无敌，你随意。\r"},"duration":0,"easing":"linear","delay":10,"iterations":1,"shakeHead":false,"scaleHead":false,"scaleBody":false,"randomFace":false,"fill":"forwards"}],"styles":{},"actionTypes":[{"value":"speak","label":"读"},{"value":"move","label":"移动","children":[{"value":"translate","label":"平移"},{"value":"walk","label":"走"},{"value":"run","label":"跑"},{"value":"jump","label":"跳"}]}]}}],"imageUrl":"assets/images/background/1_1.jpg"},{"id":"1g1smdzn","content":[{"id":"jqb908b9","speak":"背景","content":"叶凡在无敌系统后。简直是强到离谱。\r"},{"id":"58rijc6","speak":"叶凡","content":"哈哈哈\r"},{"id":"f5uecsvp","speak":"系统","content":"系统监测到附近有气运之子，是否前往查看？\r"},{"id":"gg2w15hj","speak":"叶凡","content":"前往！"}],"comps":[{"type":"background","speak":"背景","id":"15kxuarh","compId":"cka19bcv","compName":"background","comp":{"__name":"index","props":{"compData":{},"width":{"default":0},"height":{"default":0}},"__hmrId":"cfddb5a7","__scopeId":"data-v-cfddb5a7","__file":"F:/work/cssVideo/src/views/government/components/common/background/index.vue"},"schema":{"type":"background","name":"背景","property":{"background":{"show":false,"name":"背景","type":"background","value":{"image":{"label":"图片","checked":true,"url":"assets/images/background/1_1.jpg"}}}},"actions":[{"type":["speak"],"content":{"id":"jqb908b9","speak":"背景","content":"叶凡在无敌系统后。简直是强到离谱。\r"},"duration":0,"easing":"linear","delay":0,"iterations":1,"shakeHead":false,"scaleHead":false,"scaleBody":false,"randomFace":false,"fill":"forwards"}],"styles":{},"actionTypes":[{"value":"speak","label":"读"}]}},{"type":"person","id":"g564qt19","compId":"a59lgq6d","compName":"person","comp":{"__name":"index","props":{"compData":{}},"__hmrId":"61fd5685","__scopeId":"data-v-61fd5685","__file":"F:/work/cssVideo/src/views/government/components/common/person/index.vue"},"schema":{"type":"background","name":"叶凡","property":{"position":{"show":true,"name":"位置","type":"position","value":{"unit":{"label":"单位","value":"px","option":[{"label":"px","value":"px"}]},"x":{"label":"x","value":328},"y":{"label":"y","value":216},"zIndex":{"label":"层级","value":0}}},"size":{"show":true,"name":"尺寸","type":"size","value":{"unit":{"label":"单位","value":"px","option":[{"label":"px","value":"px"}]},"width":{"label":"宽度","value":93},"height":{"label":"高度","value":192}}},"background":{"show":false,"name":"背景","type":"background","value":{"image":{"checked":true,"url":"assets/images/person/1/1.png"}}},"head":{"show":true,"inited":true,"name":"头","type":"head","value":{"image":{"label":"头","value":"assets/images/person/1/1_head_93x80x42x42x15x28x0x7.png"},"width":{"label":"宽度","value":93},"height":{"label":"高度","value":80},"x":{"label":"x","value":0},"y":{"label":"y","value":7}}},"body":{"show":true,"inited":true,"name":"身体","type":"body","value":{"image":{"label":"身体","value":"assets/images/person/1/1_body_93x112.png"},"width":{"label":"宽度","value":93},"height":{"label":"高度","value":112},"x":{"label":"x","value":0},"y":{"label":"y","value":0}}},"face":{"show":true,"inited":true,"name":"表情","type":"face","value":{"image":{"label":"表情","value":"assets/images/face/1.png"},"width":{"label":"宽度","value":42},"height":{"label":"高度","value":42},"x":{"label":"x","value":15},"y":{"label":"y","value":28}}}},"actions":[{"type":["speak"],"content":{"id":"58rijc6","speak":"叶凡","content":"哈哈哈\r"},"duration":0,"easing":"linear","delay":0,"iterations":1,"shakeHead":false,"scaleHead":false,"scaleBody":false,"randomFace":false,"fill":"forwards"},{"type":["speak"],"content":{"id":"gg2w15hj","speak":"叶凡","content":"前往！"},"duration":0,"easing":"linear","delay":10,"iterations":1,"shakeHead":false,"scaleHead":false,"scaleBody":false,"randomFace":false,"fill":"forwards"}],"styles":{},"actionTypes":[{"value":"speak","label":"读"},{"value":"move","label":"移动","children":[{"value":"translate","label":"平移"},{"value":"walk","label":"走"},{"value":"run","label":"跑"},{"value":"jump","label":"跳"}]}]}},{"type":"person","id":"am9tt7gq","compId":"e7lnx86l","compName":"person","comp":{"__name":"index","props":{"compData":{}},"__hmrId":"61fd5685","__scopeId":"data-v-61fd5685","__file":"F:/work/cssVideo/src/views/government/components/common/person/index.vue"},"schema":{"type":"background","name":"系统","property":{"position":{"show":true,"name":"位置","type":"position","value":{"unit":{"label":"单位","value":"px","option":[{"label":"px","value":"px"}]},"x":{"label":"x","value":64},"y":{"label":"y","value":242},"zIndex":{"label":"层级","value":0}}},"size":{"show":true,"name":"尺寸","type":"size","value":{"unit":{"label":"单位","value":"px","option":[{"label":"px","value":"px"}]},"width":{"label":"宽度","value":54},"height":{"label":"高度","value":133}}},"background":{"show":false,"name":"背景","type":"background","value":{"image":{"checked":true,"url":"assets/images/person/2/2.png"}}},"head":{"show":true,"inited":true,"name":"头","type":"head","value":{"image":{"label":"头","value":"assets/images/person/2/2_head_54x65x25x25x18x32x0x10.png"},"width":{"label":"宽度","value":54},"height":{"label":"高度","value":65},"x":{"label":"x","value":0},"y":{"label":"y","value":10}}},"body":{"show":true,"inited":true,"name":"身体","type":"body","value":{"image":{"label":"身体","value":"assets/images/person/2/2_body_54x68.png"},"width":{"label":"宽度","value":54},"height":{"label":"高度","value":68},"x":{"label":"x","value":0},"y":{"label":"y","value":0}}},"face":{"show":true,"inited":true,"name":"表情","type":"face","value":{"image":{"label":"表情","value":"assets/images/face/1.png"},"width":{"label":"宽度","value":25},"height":{"label":"高度","value":25},"x":{"label":"x","value":18},"y":{"label":"y","value":32}}}},"actions":[{"type":["speak"],"content":{"id":"f5uecsvp","speak":"系统","content":"系统监测到附近有气运之子，是否前往查看？\r"},"duration":0,"easing":"linear","delay":0,"iterations":1,"shakeHead":false,"scaleHead":false,"scaleBody":false,"randomFace":false,"fill":"forwards"}],"styles":{},"actionTypes":[{"value":"speak","label":"读"},{"value":"move","label":"移动","children":[{"value":"translate","label":"平移"},{"value":"walk","label":"走"},{"value":"run","label":"跑"},{"value":"jump","label":"跳"}]}]}}],"imageUrl":"assets/images/background/1_1.jpg"}]}]}]})
// localStorage.setItem('draw', dataStr)

const whiteList = ['/login', '/register'];

router.beforeEach((to, from, next) => {
  NProgress.start()
  if (getToken()) {
    to.meta.title && useSettingsStore().setTitle(to.meta.title)
    /* has token*/
    if (to.path === '/login') {
      next({ path: '/' })
      NProgress.done()
    } else if (whiteList.indexOf(to.path) !== -1) {
      next()
    } else {
      if (useUserStore().roles.length === 0) {
        isRelogin.show = true
        // 判断当前用户是否已拉取完user_info信息
        useUserStore().getInfo().then(() => {
          isRelogin.show = false
          usePermissionStore().generateRoutes().then(accessRoutes => {
            // 根据roles权限生成可访问的路由表
            accessRoutes.forEach(route => {
              if (!isHttp(route.path)) {
                router.addRoute(route) // 动态添加可访问路由表
              }
            })
            next({ ...to, replace: true }) // hack方法 确保addRoutes已完成
          })
        }).catch(err => {
          useUserStore().logOut().then(() => {
            ElMessage.error(err)
            next({ path: '/' })
          })
        })
      } else {
        next()
      }
    }
  } else {
    // 没有token
    if (whiteList.indexOf(to.path) !== -1) {
      // 在免登录白名单，直接进入
      next()
    } else {
      next(`/login?redirect=${to.fullPath}`) // 否则全部重定向到登录页
      NProgress.done()
    }
  }
})

router.afterEach(() => {
  NProgress.done()
})
